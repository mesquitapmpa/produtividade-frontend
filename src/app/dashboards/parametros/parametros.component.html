<div class="grid">
  <div class="col-12">
    <div class="card px-1 py-1">
      <p-toast></p-toast>
      <!--<div *ngIf="parametros.length == 0" class="exception-body min-h-screen light">
        <div
          class="exception-container  min-h-screen flex align-items-center justify-content-center flex-column bg-auto md:bg-contain bg-no-repeat"
          style="box-sizing: border-box;background:var(--exception-pages-image);background-repeat: no-repeat; background-size: contain;">
          <div class="exception-panel text-center flex align-items-center justify-content-center flex-column"
            style="margin-top: -200px;box-sizing: border-box;">
            <h1 *ngIf="!loadingTable" class="text-blue-500 mb-0"
              style="font-size: 100px; font-weight: 900;text-shadow: 0px 0px 50px rgba(#0F8BFD, 0.2);">404</h1>
            <h3 *ngIf="!loadingTable" class="text-blue-700" style=" font-size: 40px;
      font-weight: 900;
      margin-top: -40px;
      margin-bottom: 50px;">nada encontrado</h3>

            <h3 *ngIf="loadingTable" class="text-blue-700" style=" font-size: 30px;
      font-weight: 900;
      margin-top: -90px;
      margin-bottom: 50px;">buscando...</h3>
            <div *ngIf="!loadingTable" style="width: 300px; display: flex;justify-content:space-between">
              <p-button
                  label="BUSCAR NOVAMENTE"
                  iconPos="right"
                  (click)="loadParametros()"
                  icon="pi pi-search-plus">
            </p-button>

            <p-button
                  label="NOVO PARÂMETRO"
                  iconPos="right"
                  (click)="openNew()"
                  styleClass="p-button-warning"
                  icon="pi pi-plus">
            </p-button>
            </div>
          </div>
        </div>
      </div>-->

      <p-table #dt [value]="parametros" [columns]="cols" responsiveLayout="stack" [rows]="10"
        [lazy]="false"
        (onLazyLoad)="loadParametros()"
        [loading]="loadingTable"
        [totalRecords]="totalRecords"
        [globalFilterFields]="['nome','legenda','pontos','status']" [rows]="10" [paginator]="true"
        [showCurrentPageReport]="true"
        currentPageReportTemplate="Visualizando {first} para {last} de {totalRecords} parametros"
        [(selection)]="selectedParametros" selectionMode="multiple" [rowHover]="true" dataKey="id">
        <ng-template pTemplate="caption">
          <div class="flex flex-column md:flex-row md:justify-content-between md:align-items-center">

            <span class="block mt-2 md:mt-0 p-input-icon-left">
              <button pButton pRipple label="NOVO PARÂMETRO" icon="pi pi-plus" class="p-button-success mr-2"
                (click)="openNew()"></button>
              <!--<button pButton pRipple label="DUPLICAR" icon="pi pi-plus" class="p-button-danger"
                [disabled]="!selectedParametros || !selectedParametros.length"></button>-->
            </span>
            <span class="block mt-2 md:mt-0 p-input-icon-left">
              <i class="pi pi-search"></i>
              <input pInputText type="text" (input)="onGlobalFilter(dt, $event)" placeholder="Buscar..."
                class="w-full sm:w-auto" />
            </span>
          </div>
        </ng-template>

        <ng-template pTemplate="header">
          <tr>
            <!--<th style="width: 1rem">
              <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
            </th>
            <th pSortableColumn="id">ID <p-sortIcon field="code"></p-sortIcon></th>-->
            <th pSortableColumn="nome">NOME <p-sortIcon field="nome"></p-sortIcon></th>
            <th pSortableColumn="legenda">LEGENDA <p-sortIcon field="legenda"></p-sortIcon></th>
            <th pSortableColumn="pontos">PONTOS <p-sortIcon field="pontos"></p-sortIcon></th>
            <th pSortableColumn="status">STATUS <p-sortIcon field="status"></p-sortIcon></th>
            <th>AÇÕES</th>
          </tr>
        </ng-template>

        <ng-template pTemplate="body" let-parametro>
          <tr>
            <!--<td>
              <p-tableCheckbox [value]="parametro"></p-tableCheckbox>
            </td>
            <td style="width:10%; min-width:10rem;">
              <span class="p-column-title">Code</span>
              {{parametro.code.split("-", 1)}}
            </td>-->
            <td style="width:70%; min-width:10rem;">
              <span class="p-column-title">Nome</span>
              {{parametro.nome}}
            </td>

            <td style="width:10%; min-width:10rem;">
              <span class="p-column-title">Legenda</span>
              {{parametro.legenda}}
            </td>
            <td style="width:10%; min-width:10rem;">
              <span class="p-column-title">Pontos</span>
              {{parametro.pontos}}
            </td>
            <td style="width:10%; min-width:10rem;">
              <span class="p-column-title">Status</span>
              <span  [class]="'parametro-badge status-' + parametro.status.toString().toLowerCase()">{{parametro.status ? "ATIVO" : "INATIVO"}}</span>
            </td>
            <td>
              <div class="flex">
                <button pButton pRipple icon="pi pi-pencil" class="p-button-rounded p-button-success mr-2" (click)="editParametro(parametro)"></button>
                <!--<button pButton pRipple icon="pi pi-trash" class="p-button-rounded p-button-warning" ></button>-->
              </div>
            </td>
          </tr>
        </ng-template>
      </p-table>


      <p-dialog [(visible)]="paramDialog" [maximizable]="true" [style]="{width: '50rem'}" header="DETALHES DO PARÂMETRO"
        [modal]="false" class="p-fluid">


        <ng-template pTemplate="content">
          <div class="field">
            <h6 for="nome">NOME <small style="color: red"  *ngIf="submitted && !parametro.nome">*CAMPO OBRIGATORIO</small></h6>
            <input type="text" pInputText id="nome" [(ngModel)]="parametro.nome" required autofocus
              [ngClass]="{'ng-invalid ng-dirty' : submitted && !parametro.nome}" />
          </div>

          <div class="formgrid grid">
            <div class="field col">
              <h6 for="nome">LEGENDA  <small style="color: red"  *ngIf="submitted && !parametro.legenda">*CAMPO OBRIGATORIO</small></h6>
              <input type="text" pInputText id="legenda" [(ngModel)]="parametro.legenda" required autofocus
                [ngClass]="{'ng-invalid ng-dirty' : submitted && !parametro.legenda}" />

            </div>
            <div class="field col">
              <h6 for="pontos">PONTOS <small style="color: red"  *ngIf="submitted && !parametro.pontos">*CAMPO OBRIGATORIO</small></h6>
              <p-inputNumber
                [ngClass]="{'ng-invalid ng-dirty' : submitted && !parametro.pontos}"
                [maxFractionDigits]=0 id="pontos" [showButtons]="false" [min]="0" [max]="100"
                [(ngModel)]="parametro.pontos"></p-inputNumber>
            </div>
          </div>

          <div class="field">
            <h6 for="status">STATUS <small style="color: red"  *ngIf="!parametro.status">(INATIVO)</small>
              <small style="color: green"  *ngIf="parametro.status">(ATIVO)</small></h6>

            <p-inputSwitch [(ngModel)]="parametro.status"></p-inputSwitch>

          </div>
        </ng-template>

        <ng-template pTemplate="footer">
          <br>
          <button pButton pRipple label="SAIR" icon="pi pi-times" class="p-button-text" (click)="hideDialog()"></button>
          <button [loading]="loading" pButton pRipple type="submit" label="SALVAR" icon="pi pi-check" (click)="saveParametro(parametro)"
            class="p-button-text"></button>
        </ng-template>

      </p-dialog>

    </div>
  </div>
</div>
